# spbstu-sudoku
Решатель головоломок судоку, реализованный на языке **C** с использованием алгоритма **backtracking** и ряда оптимизаций для повышения производительности. Проект разработан в рамках курса в СПбПУ (SPbSTU).
## Особенности и применённые оптимизации
Для эффективного решения сложных судоку в проекте применены следующие методы и оптимизации:
- **Backtracking** (Алгоритм поиска с возвратом): Основной алгоритм, который рекурсивно пытается заполнить пустые ячейки цифрами от 1 до 9, возвращаясь назад при обнаружении конфликта.
- **Forward Checking** (Прямая проверка): При назначении значения переменной, алгоритм немедленно проверяет все связанные ограничения и удаляет несовместимые значения из доменов (наборов возможных значений) соседних переменных.
Это позволяет обнаруживать тупиковые ветви поиска на ранних этапах.
- **Minimum Remaining Value** (MRV Heuristic - Эвристика минимальных оставшихся значений): Во время поиска сначала выбирается ячейка (переменная) с наименьшим количеством возможных оставшихся значений. Это помогает сократить ветвление дерева поиска.
- **Bitmask** (Битовая маска): Использование битовых масок для эффективного хранения и обновления наборов возможных значений для каждой ячейки. Это обеспечивает быстрые операции добавления, удаления и проверки наличия кандидатов.
## Сборка и запуск проекта
### Сборка
Проект использует `Makefile` для сборки:
```bash
$ make
```
### Запуск
После сборки исполняемые файлы можно запустить из корня проекта:
- **main** - основной исполняемый файл, содержит все алгоритмические оптимизации (**MRV** + **Bitmask** + **ForwardChecking** + **Backtracking**).
- **fast** - исполняемый файл, содержащий те же оптимизации, что и **main** с добавлением машинно-независимых и машинно-зависимых оптимизаций (флаг компилятора `gcc` `-Ofast`).
- **mrv** - исполняемый файл, содержаший только оптимизации **MRV** и **Backtracking**.
- **mrv-bm** - исполняемый файл, содержащий оптимизации **MRV**, **Bitmask** и **Backtracking**.
- **old** - самый старый вариант, не содержит алгоритмических оптимизаций кроме **Backtracking**, используется для сравнения производительности с новыми вариантами.
### Разработка с использованием NixOS/direnv
Для удобной и воспроизводимой среды разработки рекомендуется использовать **NixOS** и **direnv**. Файлы `shell.nix` и `.envrc` уже включены в репозиторий.
1. Установите **Nix** и **direnv** (если еще не установлены).
2. Разрешите `direnv` в корневой директории проекта:
```bash
$ direnv allow
```
Это автоматически загрузит все необходимые зависимости и инструменты (например, компилятор **C**) из `shell.nix` в ваше текущее окружение.
## Лицензия
Проект распространяется под лицензией **MIT**.
